Eventor - Getting Started
=======

Write side - Domain
-------
We will start with defining *Commands* that should be handled by our application. We use regular Java classes to describe it.

@include ./samples/getting-started/src/main/java/com/eventor/sample/start/RequestCredit.java

So, Command is just simple POJO that will be handled by our App.

On next step we will define *Events* that can occur in our application.


@include ./samples/getting-started/src/main/java/com/eventor/sample/start/CreditRequestAccepted.java


@include ./samples/getting-started/src/main/java/com/eventor/sample/start/CreditRequestDeclined.java


As you can see it's POJO's too.

Know let's define our domain. To do this we need to add Eventor framework as a dependency of application

    <dependencies>
        <dependency>
            <groupId>com.eventor</groupId>
            <artifactId>eventor</artifactId>
            <version>0.1-SNAPSHOT</version>
        </dependency>
    </dependencies>

    <repositories>
        <repository>
            <id>eventor</id>
            <url>https://raw.github.com/st-kurilin/eventor/master/mvn-repo</url>
        </repository>
    </repositories>


We will describe our domain with simple *Command Handler*.

@include ./samples/getting-started/src/main/java/com/eventor/sample/start/CreditRequestsCommandHandler.java

Now, let's cover it with unit tests. We will need to add additional dependencies.

    <dependency>
        <groupId>com.eventor</groupId>
        <artifactId>test-framework</artifactId>
        <version>0.1-SNAPSHOT</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>

Now we can write our test

@include ./samples/getting-started/src/test/java/com/eventor/sample/start/CreditRequestsCommandHandlerTest.java

Read side
-------
So far so good, but how we can read information from our application? We define event listeners for this purpose.

@include ./samples/getting-started/src/main/java/com/eventor/sample/start/CreditDecisionStat.java

Let's cover listener with tests.

@include ./samples/getting-started/src/test/java/com/eventor/sample/start/CreditDecisionStatTest.java

Putting it all together
-------

Now let's finally run our application.

@include ./samples/getting-started/src/main/java/com/eventor/sample/start/Runner.java


Summarize
-------

When you are going to build domain centric app with heavy read requests it's could be good point to separate Domain API, Domain and View.

![Abstract][1]


*API* consist from *Commands* and *Events*. Commands are something we want to happen, and Events are something that has happened.

*Domain* handles Commands and produce Events.

*View* consumes events generated by Domain. It should make system prepare for read requests.



[1]: http://goo.gl/lSei7P